---
import Layout from "../layouts/Layout.astro";

// Fetch les SVG depuis PocketBase
const res = await fetch("http://127.0.0.1:8090/api/collections/svgs/records");
const data = await res.json();
const svgs = data.items || [];
---

<Layout>
    <h1 class="text-2xl font-bold mb-4">Mes SVG enregistrés</h1>

    {svgs.length === 0 ? (
        <p class="text-gray-500">Aucun SVG enregistré pour le moment.</p>
    ) : (
        <div class="grid grid-cols-2 gap-4">
            {svgs.map((s) => (
                <div class="border rounded-xl p-4 bg-base-200" key={s.id}>
                    <h2 class="font-semibold mb-2">{s.name}</h2>
                    <div class="svg-container mb-2" set:html={s.svg}></div>
                    <pre class="bg-gray-100 p-2 rounded text-xs overflow-x-auto mb-2">{s.svg}</pre>
                    <button
                        class="btn btn-sm btn-outline"
                        type="button"
                        onclick={`navigator.clipboard.writeText(${JSON.stringify(s.svg)})`}
                    >
                        Copier le code SVG
                    </button>
                </div>
            ))}
        </div>
    )}
</Layout>
